<!--pages/Application/Application.wxml-->

<!--顶部导航栏-->
<text style="position: fixed;margin-right: auto;margin-top: 110rpx;z-index: 4;" bind:tap="NavigateBack">返回</text>
<view style="width: 100%;height: 180rpx;display: flex;;justify-content: center;background-color: rgb(255, 255, 255);align-items: center;position: fixed;z-index: 3;">
  <text style="margin-top: 70rpx;font-size: 40rpx;">添加好友</text>
</view>

<!--导航栏-->
<view style="margin-top: 180rpx;" class="navbar" wx:if="{{currentContentIndex === '0'}}">
 <text data-index="0" class="checked">搜索账户</text>
 <text bindtap="changeContent" data-index="1" class="nochecked">好友申请</text>
</view>

<view style="margin-top: 180rpx;" class="navbar" wx:if="{{currentContentIndex === '1'}}">
 <text bindtap="changeContent" data-index="0" class="nochecked">搜索账户</text>
 <text data-index="1" class="checked">好友申请</text>
</view>

<!--搜索账户-->
<view  wx:if="{{currentContentIndex === '0'}}">
    <view style="display: flex;align-items: center;">
      <input class="input" placeholder="  在这里输入亲友账号" bindinput="input"></input>
      <text style="flex: 1;" bind:tap="SearchFriend">搜索</text>
    </view>  


    <view wx:if="{{havesearched}}" >
      <view class="profile">
        <image style="width: 155rpx;height: 155rpx;border-radius: 50%;margin: 50rpx;" src="{{avatarUrl}}"></image>
        <view style="display: flex;flex-direction: column;">
          <text style="font-size: 45rpx;">{{nickName}}</text>
          <text style="font-size: 35rpx;">id: {{OtherAccountNumber}}</text>
        </view>
        <view style="display: flex;flex-direction: column;margin-left: auto;align-items: center;">
          <text wx:if="{{ISFriend === 'Friend'}}">是亲友</text>
          <text wx:if="{{ISFriend === 'Applicated'}}">已申请</text>
          <text wx:if="{{ISFriend === 'None'}}"  bind:tap="AddFriend">加亲友</text>
          <text bind:tap="GotoNegotiation">交易</text>
        </view>  
      </view>


      <view class="navbar" wx:if="{{currentContentIndex2 === '0'}}">
        <text data-index="0" class="checked">商品</text>
        <text bindtap="changeContent2" data-index="1" class="nochecked">动态</text>
      </view>

      <view class="navbar" wx:if="{{currentContentIndex2 === '1'}}">
        <text bindtap="changeContent2" data-index="0" class="nochecked">商品</text>
        <text data-index="1" class="checked">动态</text>
      </view>


      <!-- 商品 -->
        <view wx:if="{{currentContentIndex2 === '0'}}">

            <view wx:if="{{Goods.length !== 0}}" class="goodsform"  style="padding-top: 100rpx;margin-top: -40rpx;margin-bottom: 150rpx;">
              <view  class="singlegood"  wx:for="{{Goods}}"  wx:key="_id" data-id="{{item._id}}"  bindtap="goToGoodDetail" >
                <view style="background-color: white;width: 100%;display: flex;justify-content: center;border-radius: 10rpx;box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.1);  transition: transform 0.3s ease;">
                  <image class="picture" mode="aspectFill" src="{{item.MainImageFileID}}"></image>
                </view>  
                <view style="display: flex;flex-direction: column;align-self: flex-start;">
                  <text>{{item.MainIntroduction}}</text>
                  <text style="font-size: 40rpx;font-weight: 600;">￥{{item.Price}}</text>
                </view>
              </view>
            </view>
            <view wx:else style="display: flex;justify-content: center;margin-top: 140rpx;">
              <text style="font-size: 60rpx;font-weight: 1000;">暂时还未发布内容</text>
            </view>

        </view>

<!-- 动态 -->
      <view wx:if="{{currentContentIndex2 === '1'}}">

            <view wx:if="{{Moments.length !==0}}" wx:for="{{Moments}}" wx:for-index="index" wx:key="id" data-index="{{item}}" bind:tap="ToMomentDetail">
              <view style="display: flex;justify-content: center;margin: 40rpx;margin-bottom: 75rpx;">
                <image src="{{item.ImageFileIDs}}" style="height: 350rpx;width: 600rpx;border-radius: 20rpx;" mode="aspectFill">                  
                </image>
                <view class="LM" >
                  <image  data-index="{{item._id}}" class="like" wx:if="{{item.liked}}" src="cloud://s-6gj66i67d89df4ed.732d-s-6gj66i67d89df4ed-1327638085/社交-点赞.png"></image>
                  <image  data-index="{{item._id}}" class="like" wx:else="{{item.liked}}" src="cloud://s-6gj66i67d89df4ed.732d-s-6gj66i67d89df4ed-1327638085/未赞.png"></image>
                  <text style="margin-right: 34rpx;margin-left: 10rpx;">{{item.LikeNumber}}</text>
                  <image  data-index="{{item._id}}" class="likee" src="cloud://s-6gj66i67d89df4ed.732d-s-6gj66i67d89df4ed-1327638085/社交-对话框2.png"></image>
                  <text style="margin-left:10rpx;">{{item.CommentNumber}}</text>
                </view>
              </view>
            </view>

          <view wx:if="{{Moments.length === 0}}" style="display: flex;justify-content: center;margin-top: 140rpx;">
            <text style="font-size: 60rpx;font-weight: 1000;">暂时还未发布内容</text>
          </view>

      </view>

  </view>

  <view wx:if="{{!havesearched}}" style="display: flex;justify-content: center;margin-top: 140rpx;">
      <text style="font-size: 60rpx;font-weight: 1000;">未搜寻到亲友</text>
    </view>
</view>

<!--好友申请-->

<view wx:if="{{currentContentIndex === '1'}}">

  <view wx:if="{{ApplicationList.length !== 0}}" wx:for="{{ApplicationList}}" wx:key="id"  >
    <view style="align-items: center;display: flex;" >
      <image mode="aspectFill" style="width: 100rpx;height: 100rpx;border-radius: 50%;margin: 20rpx;" src="{{item.avatarUrl}}" bind:tap="ToOther" data-index="{{item.openid}}"></image>
      <text style="font-size:40rpx" bind:tap="ToOther" data-index="{{item.openid}}">{{item.nickName}}</text>
      <text style="margin-left: auto;font-size: larger;margin-right: 20rpx;z-index: 2;" bind:tap="AgreeFriendApplication" data-index="{{item.openid}}">同意</text>
    </view>  
  </view>

  <view wx:if="{{ApplicationList.length === 0}}" style="display: flex;justify-content: center;margin-top: 140rpx;">
    <text style="font-size: 60rpx;font-weight: 1000;">未接收到好友申请</text>
  </view>
</view>